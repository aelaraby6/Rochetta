import{v as y,w as j,r as N,j as e}from"./index-D8XKaJer.js";import{u as k,a as w,o as v,b as P,s as i}from"./schemas-Cw1jXD5e.js";import{C as c}from"./circle-plus-yMZmLdwg.js";import{P as g,D as _}from"./package-Mwv3Sw9P.js";import{P as S,T as A,F,I as q,S as B,n as l}from"./coerce-Dj_VcUUH.js";const C=v({name:i().min(3,"Name must be at least 3 characters"),price:l().positive("Price must be greater than 0"),pieces:l().int().nonnegative("Pieces cannot be negative"),stripsPerBox:l().int().nonnegative().default(0),category:i().min(1,"Category is required"),desc:i().min(5,"Description is too short"),requires_prescription:P().default(!1)});function M(){const[x,{isLoading:d}]=y(),{data:m}=j(),p=m?.data||[],[n,o]=N.useState(null),{register:t,handleSubmit:b,reset:u,formState:{errors:s}}=k({resolver:w(C)}),f=async r=>{const a=new FormData;a.append("name",r.name),a.append("price",r.price),a.append("stock",r.pieces),a.append("category",r.category),a.append("description",r.desc),a.append("requires_prescription",r.requires_prescription),r.stripsPerBox>0?(a.append("has_strips","true"),a.append("strip_count",r.stripsPerBox)):a.append("has_strips","false"),n&&a.append("image",n);try{await x(a).unwrap(),u(),o(null)}catch(h){console.error(h)}};return e.jsxs("div",{className:"max-w-4xl mx-auto mt-12 p-8 bg-white dark:bg-gray-800 rounded-2xl shadow-[0_4px_12px_rgba(0,0,0,0.08)] dark:shadow-[0_4px_12px_rgba(0,0,0,0.3)] border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8 pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx(c,{className:"w-8 h-8 text-green-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Add New Product"})]}),e.jsxs("form",{onSubmit:b(f),className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(g,{className:"w-5 h-5"}),e.jsx("label",{className:"font-semibold",children:"Product Name"})]}),e.jsx("input",{...t("name"),className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"e.g. Panadol Extra"}),s.name&&e.jsx("span",{className:"text-red-500 text-sm font-semibold",children:s.name.message})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(_,{className:"w-5 h-5"}),e.jsx("label",{className:"font-semibold",children:"Price"})]}),e.jsx("input",{type:"number",step:"0.01",...t("price"),className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"0.00"}),s.price&&e.jsx("span",{className:"text-red-500 text-sm font-semibold",children:s.price.message})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(g,{className:"w-5 h-5"}),e.jsx("label",{className:"font-semibold",children:"Available Pieces"})]}),e.jsx("input",{type:"number",...t("pieces"),className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"Stock quantity"}),s.pieces&&e.jsx("span",{className:"text-red-500 text-sm font-semibold",children:s.pieces.message})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("label",{className:"font-semibold",children:"Strips per Box (Optional)"})]}),e.jsx("input",{type:"number",...t("stripsPerBox"),className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"0 if not applicable"}),s.stripsPerBox&&e.jsx("span",{className:"text-red-500 text-sm font-semibold",children:s.stripsPerBox.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("label",{className:"font-semibold",children:"Category"})]}),e.jsxs("select",{...t("category"),className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Select a Category"}),p.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]}),s.category&&e.jsx("span",{className:"text-red-500 text-sm font-semibold",children:s.category.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("label",{className:"font-semibold",children:"Description"})]}),e.jsx("textarea",{...t("desc"),rows:"3",className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none transition-all resize-none",placeholder:"Detailed product description..."}),s.desc&&e.jsx("span",{className:"text-red-500 text-sm font-semibold",children:s.desc.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(q,{className:"w-5 h-5"}),e.jsx("label",{className:"font-semibold",children:"Product Image"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:r=>o(r.target.files[0]),className:"p-2 w-full text-sm text-gray-900 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer bg-gray-50 dark:bg-gray-700 focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"})]}),e.jsxs("div",{className:"flex items-center gap-3 md:col-span-2 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsx(B,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{className:"flex items-center gap-2 flex-grow",children:[e.jsx("input",{type:"checkbox",id:"prescription",...t("requires_prescription"),className:"w-5 h-5 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500 dark:focus:ring-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"}),e.jsx("label",{htmlFor:"prescription",className:"text-red-900 dark:text-red-400 font-bold cursor-pointer select-none",children:"Requires Medical Prescription (Roshetta)"})]})]}),e.jsx("div",{className:"md:col-span-2 mt-4",children:e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-bold py-4 px-6 rounded-xl transition-all active:scale-[0.98] shadow-lg flex justify-center items-center gap-2 text-lg",children:d?"Adding Product...":e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"w-6 h-6"})," Add Product to Store"]})})})]})]})}export{M as default};
